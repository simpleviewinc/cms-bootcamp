<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Data Fetching</title>
</head>
<body>
	
	<ul class="movies"></ul>
	
	<script>
		// Add your code here
        const apiUrl = "https://ghibliapi.herokuapp.com/films";
        const movieList = document.querySelector('ul.movies');
        async function handlePromise(promise) {
            let data, err;

            try {
                const res = await promise;
                data = await fetch(`${promise}`);
                return data.json();
            } catch (error) {
                console.log('error');
            }
            return data;
        }

        const data = handlePromise(apiUrl);
        
        async function filmHTMLList() {
			const filmsList = await data;
			return filmsList.map(film => `<li>${film.title}</li>`).join('');
		}

		async function populateMovies() {
			movieList.innerHTML = await filmHTMLList();
		}
		populateMovies();
        
	</script>

</body>
</html>