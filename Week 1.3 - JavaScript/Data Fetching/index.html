<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Data Fetching</title>
</head>
<body>
	
	<ul class="movies"></ul>
	
	<script>

		const endpoint = 'https://ghibliapi.herokuapp.com';
		const filmsEndpoint = `${endpoint}/films`;
		const moviesList = document.querySelector('.movies');

		const fetchHerokuData = fetch(filmsEndpoint);

		fetchHerokuData.then(response => {
			return response.json();
		})
		.then(data => {
			data.forEach(film => {
				moviesList.insertAdjacentElement('beforeEnd', buildTitle(film));
			});
		})
		.catch(handleError);

		// Creates <li> and populates with film's title
		function buildTitle(film) {
			let title = document.createElement('li');
			title.innerHTML = film.title;
			return title;
		}
		
		function handleError(err) {
			console.log(err);
		}
	</script>

</body>
</html>